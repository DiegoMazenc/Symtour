{% extends 'base.html.twig' %}

{% block title %}Profil
	{{ profil.pseudo }}
{% endblock %}

{% block body %}
{% if app.user.profil.id == app.request.attributes.get('id') and app.user.isVerified == 0 %}
			<div class="user-contain py-5 px-20  bg bg-slate-100"> 
	
<p>veuillez valider votre compte via l'eamil de confirmation</p>
</div>
{% elseif app.user.profil.id == app.request.attributes.get('id') and app.user.isVerified == 1 and app.user.profil.pseudo == ''  %}
			<div class="user-contain py-5 px-20  bg bg-slate-100"> 

<p>Félicitation vous êtes bien inscrit, pour accéder aux services, merci de remplir vos informations</p>
<a href="/profil/{{ app.user.profil.id}}/edit">Je remplis mes informations</a>
</div>

		

	{% else %}
			<div class="user-contain py-5 px-20  bg bg-slate-100"> 
	<div class="header-user flex ">
		<div class="pic_profil">
			<img src="{{ profil.picture }}" alt="" class="user-img">
		</div>
		<div class="user-infos">
			<h3 class="font-bold ">{{ profil.pseudo }}</h3>
			<h3 class="mb-8">{{ profil.description }}</h3>

		</div>

	</div>
	<hr class=" border-black my-5">
	<div class="tab_project">
		<div class="my-10">
			<h4>Mes salles</h4>
			<div class="bg-white rounded-md shadow-md p-3">
				{% for hallMember in profil.hallMembers %}
					<div
						class="cardAdminProfil flex justify-between ">
						{# <p>{{ bandMember.band.logo}}</p> #}
						<img src="{{ hallMember.hall.logo}}" alt="" class=" w-8 rounded-md">
						<p>{{ hallMember.hall.name}}</p>
						{# <p>{{ hallMember.hall.musicCategory.category}}</p>
																																										<p>{{ hallMember.hall.defineStyle}}</p> #}
						<p>{{ hallMember.role.roleName}}</p>
						<a href="/hall/{{ hallMember.hall.id }}" class="btn-gerer">Gérer</a>
					</div>
					<hr class="my-3">
				{% endfor %}
				<a href="{{ path('app_hall_new') }}" class="text-slate-400 hover:text-blue-500 ">
					<button class="bg-slate-700 rounded-full px-2 pb-1 mr-4 text-white font-bold hover:bg-blue-500">+</button>Créer une nouvelle salle</a>
			</div>
		</div>
		<div class="my-10">
			<h4>Mes Groupes</h4>
			<div class="bg-white rounded-lg shadow-md p-3">
				<table class="tab-band w-full">
					<thead>
						<tr>
							<th class="text-left">Band</th>
							<th class="text-left">Catégorie</th>
							<th class="text-left">Genre</th>
							<th class="text-left">Role</th>
							<th class="text-left">Gérer</th>
						</tr>
					</thead>
					<tbody>
						{% for bandMember in profil.bandMembers %}
							<tr class="mb-10">
								<td>
									<div class="flex">
										<img src="{{ bandMember.band.logo}}" alt="" class=" w-8 rounded-md">
										<p class="ml-3">{{ bandMember.band.name}}</p>
									</div>
								</td>
								<td>{{ bandMember.band.musicCategory.category}}</td>
								<td>{{ bandMember.band.defineStyle}}</td>
								<td>{{ bandMember.role.roleName}}</td>
								<td>
								{% if bandMember.status == "guest" %}
								<div>
											<form action="{{ path('app_profil_show', {'id': app.user.profil.id}) }}" method="post">
												<input type="hidden" name="action" value="validate">
												<input type="hidden" name="bandMmemberId" value="{{ bandMember.id }}">
												<button type="submit" class="validate-button px-2 py-1 rounded-lg bg-emerald-300 text-white hover:bg-emerald-500">Valider</button>
											</form>
											<form action="{{ path('app_profil_show', {'id': app.user.profil.id}) }}" method="post">
												<input type="hidden" name="action" value="reject">
												<input type="hidden" name="bandMmemberId" value="{{ bandMember.id }}">
												<button type="submit" class="reject-button px-2 py-1 rounded-lg bg-red-300 text-white hover:bg-red-600">Refuser</button>
											</form>
										</div>
									{% else %}
									<a href="/band/{{ bandMember.band.id }}" class="btn-gerer">Gérer</a>
								{% endif %}
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>

				<hr class="my-5">
				<a href="{{ path('app_band_new') }}" class="text-slate-400 hover:text-blue-500 ">
					<button class="bg-slate-700 rounded-full px-2 pb-1 mr-4 text-white font-bold hover:bg-blue-500">+</button>Créer un nouveau groupe</a>
			</div>
		</div>

	</div>
	</div>
{% endif %}
{% endblock %}
