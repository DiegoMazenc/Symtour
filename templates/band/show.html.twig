{% extends 'base.html.twig' %}

{% block title %}Band
{% endblock %}

{% block body %}
	{% set isAdmin = false %}
	{% for member in band.bandMembers %}
		{% if is_granted('band_member_edit', member ) %}
			{% set isAdmin = true %}
		{% endif %}
	{% endfor %}
	<div class="user-contain px-5 lg:px-28 py-5 bg-slate-100">
		{% include "band/show-modules/_header.html.twig" %}
		{# dashboard #}
		<div class="tab_project">
			{% if isAdmin %}
				<div class="my-3">
					<div class="lg:flex lg:relative">
						<div class=" calendar bg-slate-700  text-white p-5 rounded-md lg:mr-3 mb-3 lg:mb-0">
							<div class="flex justify-between pb-3">
								<button id="prevMonth" class="arrow-left text-white rounded-full bg-slate-500 font-bold  px-2 mx-1">&#10094;</button>
								<div id="monthYearHeader"></div>
								<button id="nextMonth" class="arrow-right text-white rounded-full bg-slate-500 font-bold  px-2 mx-1">&#10095;</button>
							</div>
							<div id="calendrier"></div>
							{# <div id="calendar-holder"></div> #}
						</div>
						<div id="eventModal" class="modal  bg-white rounded-md shadow-md lg:absolute">
							<div class="modal-content"><!-- Contenu de la modale -->
								<!-- Ajoutez ici les éléments pour afficher les détails de l'événement -->
							</div>
						</div>
						{% include "band/show-modules/_add_date.html.twig" %}
					</div>
				</div>
			{% endif %}
			<div class="lg:flex lg:justify-between">
				<div class="md:w-full lg:w-1/2 lg:mr-3 bg-white rounded-md shadow-md mt-3 ">
					<div class="flex justify-between item-align bg-slate-700 relative rounded-t-md">
						<h4 class=" text-white p-2 ">Prochains events</h4>
						<div class="flex absolute right-2 top-2">
							<div id="arrow-left" class="arrow-left text-white rounded-full bg-slate-500 font-bold  px-2 mx-1">&#10094;</div>
							<div id="arrow-right" class="arrow-right text-white rounded-full bg-slate-500 font-bold  px-2 mx-1">&#10095;</div>
						</div>
					</div>
					{% set count = 0 %}
					{% for events in eventCome %}
						{% if events.status == 1 %}
							{% set count = count + 1 %}
						{% endif %}
					{% endfor %}
					{% set widthPercentage = count * 100 %}
					{% include "band/show-modules/_come_events.html.twig" %}
				</div>
				<div class="md:w-full lg:w-1/2 bg-white rounded-md shadow-md mt-3 ">
					<h4 class="bg-slate-700 text-white p-2 rounded-t-md">Dernier events
					</h4>
					<div class=" flex justify-between">
						{% include "band/show-modules/_last_events.html.twig" %}
					</div>
				</div>
			</div>
		</div>
		<div class="my-10">
			<div class="flex justify-between item-align bg-slate-700 relative rounded-t-md">
				<h4 class=" text-white p-2 ">Membres</h4>
			</div>
			<div class="bg-white rounded-lg shadow-md p-3">
				{% include "band/show-modules/_members.html.twig" %}
				{% if isAdmin %}
					<a href="{{ path('app_band_members', {'id': band.id}) }}" class="text-slate-400 hover:text-blue-500 ">
						<button class="bg-slate-700 rounded-full px-2 pb-1 mr-4 text-white font-bold hover:bg-blue-500">+</button>Ajouter un nouveau membre</a>
				{% endif %}
			</div>
		</div>
	</div>

</div>
{% include "band/js/calendar.html.twig" with {eventsData:eventsData} %}
{% include "band/js/delete_notif.html.twig" with {band:band} %}


<script></script>{% endblock %}
