{% extends 'base.html.twig' %}

{% block title %}Hall
{% endblock %}

{% block body %}
	<div class="user-dashboard  flex bg-sky-950 ">
		<div class="user-sidebar basis-1/4 bg-sky-950 p-5 h-screen text-white">
			<div id="calendar-holder"></div>

			<h4 class="my-5">Mes Events</h4>
			{% for event in hall.events %}
				{% if event.status == 1 %}
					<div class="cardAdminProfil flex justify-between ">
						<p>{{ event.date|date('d-m-Y')  }}</p>
						<p>{{ event.band.name }}</p>

						<div>

							<button class="px-2 py-1 rounded-lg bg-red-300 text-white hover:bg-red-600">Annuler</button>
						</div>
					</div>
					<hr class="my-3">
				{% endif %}
			{% endfor %}
		</div>
		<div class="user-contain   basis-3/4 px-28 py-5 bg bg-slate-100">
			<div class="header-user flex justify-evenly">
				<div class="pic_profil">
					<img src="{{ hall.logo }}" alt="" class="user-img">
				</div>
				<div class="user-infos">
					<h3 class="font-bold ">{{ hall.name }}</h3>
					{# <h3 class="mb-8">{{ band.musicCategory.category }} ( {{ band.defineStyle }} )</h3> #}
					<div class="nav-params-user">
						<ul class="flex">
							<li class="mx-5">
								<a href="/hall/{{ hall.id }}/edit">Mes infos</a>
							</li>
							<li class="mx-5">Messagerie</li>
							<li class="mx-5">Notifications</li>
							<li class="mx-5">Param√®tres</li>
						</ul>
						<hr>
					</div>
				</div>

			</div>
			<div class="tab_project">
							<div class="my-10">

				<h4>Events en attente</h4>
				<div class="bg-white rounded-lg shadow-md p-3">
					{% for event in hall.events %}
						{% if event.status == 3 %}
							<div class="cardAdminProfil flex justify-between ">
								<p>{{ event.date|date('d-m-Y')  }}</p>
								<p>{{ event.band.name }}</p>

								<div>
									<button class="px-2 py-1 rounded-lg bg-emerald-300 text-white hover:bg-emerald-500">Valider</button>
									<button class="px-2 py-1 rounded-lg bg-red-300 text-white hover:bg-red-600">Refuser</button>
								</div>
							</div>
							<hr class="my-3">
						{% endif %}
						<a href="{{ path('app_event_new') }}" class="text-slate-400 hover:text-blue-500 ">
						{% endfor %}
						<button class="bg-slate-700 rounded-full px-2 pb-1 mr-4 text-white font-bold hover:bg-blue-500">+</button>Organiser un nouvel Event</a>
				</div>
				</div>
				<div class="my-10">
					<h4>Membres</h4>
					<div class="bg-white rounded-lg shadow-md p-3">

						{% for member in hall.hallMembers %}
							<div class="cardAdminProfil flex justify-between ">
								{# <p>{{ bandMember.band.logo}}</p> #}
								{# <p>{{ member.profil.id }}</p> #}
									<p>
								{{ member.role.roleName}}
								</p>
									<p>
								{{ member.profile.pseudo}}
							</p>
							</div>
						<hr class="my-3"> {% endfor %}
						<a href="{{ path('app_hall_member_new') }}" class="text-slate-400 hover:text-blue-500 ">
							<button class="bg-slate-700 rounded-full px-2 pb-1 mr-4 text-white font-bold hover:bg-blue-500">+</button>Ajouter un nouveau membre</a>
					</div>

				</div>
			</div>

		</div>
	</div>

{% endblock %}


{% block javascripts %}
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.5/index.global.min.js" integrity="sha256-dHUNnePy81fXq4D/wfu7cPsEIP7zl6MvLb84jtZf+UY=" crossorigin="anonymous"></script>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
var calendarEl = document.getElementById('calendar-holder');

var calendar = new FullCalendar.Calendar(calendarEl, {

defaultView: 'dayGridMonth',
editable: true,
eventSources: [
{
url: "/fc-load-events",
method: "POST",
extraParams: {
filters: JSON.stringify({})
},
failure: () => { // alert("There was an error while fetching FullCalendar!");
}
},
],
headerToolbar: {
start: 'prev,next today',
center: 'title',
end: 'dayGridMonth,timeGridWeek,timeGridDay'
},
timeZone: 'UTC'
});
calendar.render();
});
	</script>

{% endblock %}
